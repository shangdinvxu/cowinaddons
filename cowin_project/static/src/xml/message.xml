<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">
    <t t-name="MessageMeView">

        <!--<h2 style="padding-left: 12px;">消息列表</h2>-->

        <t t-foreach="message_data.message_data" t-as="message">
            <t t-js="ctx">
                function change_time(date_planned){
                    date_planned = date_planned.replace(/\s/g,'T').replace(/\//g,'-');
                    var my_date = Date.parse(new Date(date_planned))
                    var newDate = new Date();
                    var time_offset = newDate.getTimezoneOffset() * 60000
                    var c_date = new Date(my_date - time_offset)
                    return moment(c_date).format('YYYY-MM-DD HH:mm:ss');
                }
                ctx.message_data.forEach(function(val){
                    val.date = change_time(val.date)
                })
            </t>
            <div class="message_header_date"><span><t t-esc="message.message_date"/></span></div>
            <t t-foreach="message.message_data" t-as="item">
                <div class="message_item">
                    <t t-raw="item.body"/>
                    <div class="message_item_time">
                        <t t-esc="item.date"/>
                    </div>
                </div>
            </t>
        </t>
        <t t-if="view_more==true">
            <div class="view_more_message">
                <span>-------获取更多信息-------</span>
            </div>
        </t>

    </t>

</templates>